from tkinter import *

def afficher_allumettes(nball):

    fichier='../Images/allumettes/' + str(nball) + ' allumettes.gif'
    return fichier

def nombre_de_chances():

    global fenetre_enigme2, lab, nombre_allumettes, perdu, bravo

    i=3 #nombre de chance
    while i>0:
        while nombre_allumettes>0:

            bouton1 = Button(fenetre_enigme2,command=prendre_1_allumette)
            bouton1.configure(text="1",font=(50))
            bouton1.place(x=1/3*largeur_fenetre_enigme2,y=2/9*hauteur_fenetre_enigme2)

            bouton2 = Button(fenetre_enigme2,command=prendre_2_allumettes)
            bouton2.configure(text="2",font=(50))
            bouton2.place(x=7/15*largeur_fenetre_enigme2,y=2/9*hauteur_fenetre_enigme2)

            bouton3 = Button(fenetre_enigme2,command=prendre_3_allumettes)
            bouton3.configure(text="3",font=(50))
            bouton3.place(x=3/5*largeur_fenetre_enigme2,y=2/9*hauteur_fenetre_enigme2)



            if nombre_allumettes==0:
                i-=1
                texte2=Label(fenetre_enigme2, text="Vous avez perdu :( , il vous reste " + str(i) + "chances")
                texte2.place(x=1/3*largeur_fenetre_enigme2, y=5/18*hauteur_fenetre_enigme2)
                lab.configure(image=perdu)

            else:
                texte2=Label(fenetre_enigme2, text="Il reste " + str( nombre_allumettes)  + " allumettes!")
                texte2.place(x=1/3*largeur_fenetre_enigme2, y=5/18*hauteur_fenetre_enigme2)

                if nombre_allumettes%4==3:
                    p=2
                elif nombre_allumettes%4==2:
                    p=1
                elif nombre_allumettes%4==0:
                    p=3
                else:
                    p=1

                texte3=Label(fenetre_enigme2,text="J'en prends " + str(p))   #ce que l'ordi prend
                texte3.place(x=5/12*largeur_fenetre_enigme2, y=5/18*hauteur_fenetre_enigme2)
                nombre_allumettes-=p
                al= PhotoImage(file = afficher_allumettes(nombre_allumettes))  #si on ne passe pas par une variable pour l'image ca ne marche pas
                lab.configure(image= al)
                texte2.destroy()
                texte2=Label(fenetre_enigme2, text="Il reste " + str(nombre_allumettes)  + " allumettes!")
                texte2.place(x=29/60*largeur_fenetre_enigme2, y=5/18*hauteur_fenetre_enigme2)


                if nombre_allumettes<=0:
                    lab.configure(image=bravo)
                    texte4=Label(text="J'ai perdu! Bravo")
                    texte4.place(x=11/15*largeur_fenetre_enigme2, y=2/9*hauteur_fenetre_enigme2)
                    i=0

                else:
                    al= PhotoImage(file = afficher_allumettes(nombre_allumettes))
                    lab.configure(image= al)
    if i==0:
        bouton4.destroy()



def prendre_3_allumettes():
    global nombre_allumettes,lab    # la variable utiliséé à l'intérieur de la fonction est la même que celle à l'extérieur
    nombre_allumettes-=3
    al= PhotoImage(file = afficher_allumettes(nombre_allumettes))
    lab.configure(image= al)



def prendre_2_allumettes():
    global nombre_allumettes,lab
    nombre_allumettes-=2
    al= PhotoImage(file = afficher_allumettes(nombre_allumettes))
    lab.configure(image= al)


def prendre_1_allumette():
    global nombre_allumettes,lab
    nombre_allumettes-=1
    al= PhotoImage(file = afficher_allumettes(nombre_allumettes))
    lab.configure(image = al)


def reinit():
    global lab, nombre_allumettes
    nombre_allumettes=10
    lab.configure(image=allumettes)

#variable
nombre_allumettes=10

# fenetre graphique
fenetre_enigme2 = Tk()
fenetre_enigme2.title("Jeux des allumettes")
fenetre_enigme2.wm_state(newstate="zoomed")
largeur_fenetre_enigme2 = fenetre_enigme2.winfo_screenwidth()
hauteur_fenetre_enigme2 = fenetre_enigme2.winfo_screenheight()

#images
allumettes = PhotoImage(file ='../Images/allumettes/10 allumettes.gif')
bravo=PhotoImage(file ='../Images/bravo.gif')
perdu=PhotoImage(file ='../Images/perdu2.gif')

# Label
texte=Label(fenetre_enigme2, text="Jeux des allumettes :", font=("Helvetica", 40))
texte.place(x=1/3*largeur_fenetre_enigme2,y=1/18*hauteur_fenetre_enigme2)

texte1 = Label(fenetre_enigme2, text="Cliquez sur le nombre d'allumettes que vous prenez:",font=("Helvetica", 18))
texte1.place(x=3/10*largeur_fenetre_enigme2,y=1/6*hauteur_fenetre_enigme2)

texte5=Label(fenetre_enigme2, text="Les règles du jeu:\n -Il y a 10 allumettes \n -Chacun leur tour le joueur et l'ordi choissisent de prendre 1, 2 ou 3 allumettes\n -Celui qui prend la dernière allumette perd .",font=("Helvetica", 10))
texte5.place(x=7/10*largeur_fenetre_enigme2, y=1/12*hauteur_fenetre_enigme2)

lab = Label(fenetre_enigme2, image=allumettes)
lab.place(x=1/5*largeur_fenetre_enigme2,y=1/3*hauteur_fenetre_enigme2)


# boutons
bouton1 = Button(fenetre_enigme2,command=nombre_de_chances)
bouton1.configure(text="1",font=(50))
bouton1.place(x=1/3*largeur_fenetre_enigme2,y=2/9*hauteur_fenetre_enigme2)

bouton2 = Button(fenetre_enigme2,command=nombre_de_chances)
bouton2.configure(text="2",font=(50))
bouton2.place(x=7/15*largeur_fenetre_enigme2,y=2/9*hauteur_fenetre_enigme2)

bouton3 = Button(fenetre_enigme2,command=nombre_de_chances)
bouton3.configure(text="3",font=(50))
bouton3.place(x=3/5*largeur_fenetre_enigme2,y=2/9*hauteur_fenetre_enigme2)

bouton4 = Button(fenetre_enigme2,text='Recommencer',command=reinit)
bouton4.place(x=4/15*largeur_fenetre_enigme2,y=7/9*hauteur_fenetre_enigme2)

bouton5 = Button(fenetre_enigme2,text='Quitter',command=fenetre_enigme2.destroy)
bouton5.place(x=2/3*largeur_fenetre_enigme2,y=7/9*hauteur_fenetre_enigme2)

# demarrage :
fenetre_enigme2.mainloop()
