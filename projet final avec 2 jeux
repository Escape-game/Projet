from random import randint
from tkinter import *

def démarrage():

    #fenêtre
    fen_accueil.resizable(width=False, height=False)             #l'utilsateur ne peut pas modifier la taille
    fen_accueil.wm_state(newstate="zoomed")            #la fentre est en pleine ecran
    fen_accueil.title("Bienvenue")

    #Label
    etiquette=Label(fen_accueil, text="Escape Game", font=("Times",52), fg='black')
    etiquette.pack()

    etiquette2=Label(fen_accueil, text="Quel est ton nom?",font=("Arial",24), fg='black')
    etiquette2.place(x=675, y=300)

    #Entry
    entree_nom= Entry(fen_accueil)
    entree_nom.place(x=735, y=350)
    entree_nom.bind("<Return>",prénom)

    #Bouton
    bouton=Button(fen_accueil, text="Commencer le jeu", bg='white', fg='red', command=début)
    bouton.place(x=750, y= 400)

def prénom(x):

    entree_nom.configure(text="Quel est ton nom?"+entree_nom.get())        #recuperer le champ entré

def début():

    #fenêtre principale
    fen_princ=Toplevel(fen_accueil)
    fen_princ.title("Page principale")
    fen_princ.resizable(width=False, height=False)             #l'utilsateur ne peut pas modifier la taille
    fen_princ.wm_state(newstate="zoomed")                      #la fentre est en pleine ecran

    largeur_fen_princ = fen_princ.winfo_screenwidth()
    hauteur_fen_princ = fen_princ.winfo_screenheight()

    #canvas
    can=Canvas(fen_princ, width=largeur_fen_princ, height=hauteur_fen_princ, bg="light blue")
    can.pack()

    #variables globales
    global zone
    zone=[[0 , 0 , 500 , 0 , 300  ],[ 1 , 500 , 1600 , 300 , 900 ]]

    fen_princ.bind('<Button-1>', recherche_zone)

    ############## décompte ###############


    def decompte(count=10):

        lab.config(text=str(count), font=("Arial",30))

        if count > 0 :
            fen_decompte.after(1000,decompte, count-1)    #after est une fonction qui appelle une autre fonction après une durée en millisecondes

        if count==0:
            fen_decompte.wm_state(newstate="zoomed")
            lab.config(text="GAME OVER",font=("Times New Roman",100), bg='black', fg='red')

    #fenêtre
    fen_decompte=Toplevel(fen_accueil)
    fen_decompte.geometry("250x150")
    fen_decompte.title("L'heure tourne")

    #Label
    lab=Label(fen_decompte, text="")
    lab.pack()

    #Bouton
    btn=Button(fen_decompte, text="commencer", command=decompte)
    btn.pack(side=LEFT,padx=5 ,pady=5)

    btn2=Button(fen_decompte, text="Abandonner la partie",command=fen_decompte.destroy)
    btn2.pack(side=RIGHT, padx=5 , pady=5)

def recherche_zone (evenement):

    global coordonée_x , coordonnée_y
    coordonée_x, coordonée_y = evenement.x, evenement.y
    i=0

    while i <len(zone):

        if zone[i][1]<coordonée_x< zone[i][2] and zone[i][3]<coordonée_y<zone[i][4] :

            global zone_cliquée
            zone_cliquée=zone[i][0]
            nouvelle(zone_cliquée)
        i+=1

def nouvelle(zone_cliquée):

    def jeu_1():

        def indice(x):
            if x==4:
                    message="Voici un indice: Si on mange que ça, on meurt"
            elif x==3:
                    message="Voici un indice: La première lettre du mot est R"
            elif x==2:
                    message="Voici un indice: Le mot est en 4 lettres"
            elif x==1:
                    message="Voici un indice: C'est un antonyme de 'tout'"
            elif x==0:
                    message="\n Vous avez perdu! \n La bonne réponse était 'rien'. \n En effet rien n'est mieux que Dieu, rien n'est pire que le diable, les pauvres n'ont rien et les riches ont besoin de rien."
            return message

        def verification():

            if entree.get()=="rien":
                lab3=Label(fen_enigme1, text="Bravo!! en effet rien n'est mieux que Dieu, rien n'est pire que le diable, les pauvres n'ont rien et les riches n'ont besoin de rien")
                lab3.pack()
                lab4=Label(fen_enigme1, text="Voici le 3ème chiffre du code: 0000 ")
                lab4.pack()
            else:

                global i          #pour que la valeur de i diminue de 1 à chaque fois et ne reviennent pas à 5
                lab5=Label(fen_enigme1, text="Non ce n'est pas ça, il vous reste " + str(i-1) + " chances. " + indice(i-1), font=("arial", 15))
                lab5.pack()
                i=i-1

        #fenêtre
        fen_enigme1=Toplevel(fen_accueil)
        fen_enigme1.geometry("250x150")
        fen_enigme1.title("Enigme 1")
        fen_enigme1.wm_state(newstate="zoomed")

        #Variables globales
        global i
        i=5

        #Label
        texte1=Label(fen_enigme1, text="Bienvenue ! \n vous voulez gagner un indice il vous faudra répondre à cette égnime: \n c'est mieux que Dieu, pire que le diable, les pauvres l'ont, les riches en ont besoin...", font= ("Arial",30))
        texte1.pack(pady=100)
        texte2=Label(fen_enigme1, text="Quelle est la réponse?", font=("Arial",25))
        texte2.pack(pady=10)

        #Entry
        entree= Entry(fen_enigme1, font=20)
        entree.pack(pady=10)


        #Bouton
        bouton = Button(fen_enigme1, text="validez votre réponse", font= ("arial", 20), command = verification)
        bouton.pack(pady=10)
        bouton_quitter=Button(fen_enigme1, text="Quitter", font= ("arial", 20), command = fen_enigme1.destroy)
        bouton_quitter.pack(pady=10)
        #démarrage
        fen_enigme1.mainloop()

    def jeu_2():

        # ton_coup/joueur en ligne, mon_coup/ordi en colonne
        #          Papier    pierre     Ciseau
        # Papier   0         -1          1
        # Pierre   1         0          -1
        # Ciseau   -1         1          0

        quigagne = [[0, -1, 1], [1, 0, -1], [-1, 1, 0]]

        def augmenter_scores(mon_coup,ton_coup):

            resultat = quigagne[ton_coup-1][mon_coup-1]
            global mon_score, ton_score

            if resultat == 1:
                ton_score += 1

            elif resultat == -1:
                mon_score += 1

        def jouer(ton_coup):

            global mon_score, ton_score, score1, score2, texte3
            mon_coup = randint(1,3)

            if mon_coup==1:
                lab3.configure(image=pierre)

            elif mon_coup==2:
                lab3.configure(image=papier)

            else:
                lab3.configure(image=ciseaux)

            augmenter_scores(mon_coup,ton_coup)
            score1.configure(text=str(ton_score))
            score2.configure(text=str(mon_score))

            if mon_score == 5:    #si ordi gagne

                bouton1.destroy()
                bouton2.destroy()
                bouton3.destroy()
                bouton4.destroy()
                texte3.destroy()

                texte3 = Label(fen_enigme2, text="Le jeu est fini, tu as perdu !",font=("Helvetica", 18))
                texte3.place(x=600,y=450)
                lab4 = Label(fen_enigme2, image=perdu)
                lab4.place(x=600,y=500)

            elif ton_score == 5:   #si joueur gagne

                bouton1.destroy()
                bouton2.destroy()
                bouton3.destroy()
                bouton4.destroy()
                texte3.destroy()

                texte3 = Label(fen_enigme2, text="Le jeu est fini! Voici le 1er chiffre du code: 0000",font=("Helvetica", 18))
                texte3.place(x=500,y=450)
                lab4 = Label(fen_enigme2, image=bravo)
                lab4.place(x=600,y=500)

        def jouer_pierre():

            jouer(1)
            lab1.configure(image=pierre)

        def jouer_papier():

            jouer(2)
            lab1.configure(image=papier)

        def jouer_ciseaux():

            jouer(3)
            lab1.configure(image=ciseaux)

        def reinit():

            global mon_score,ton_score,score1,score2,lab1,lab3
            ton_score = 0
            mon_score = 0

            score1.configure(text=str(ton_score))
            score2.configure(text=str(mon_score))

            lab1.configure(image=rien)
            lab3.configure(image=rien)

        #fenêtre
        fen_enigme2=Toplevel(fen_accueil)
        fen_enigme2.geometry("250x150")
        fen_enigme2.title("Pierre, papier, ciseaux")
        fen_enigme2.wm_state(newstate="zoomed")

        # variables globales
        ton_score = 0
        mon_score = 0

        #images
        rien = PhotoImage(file ='../Images/chi fou mi/rien.gif')
        versus = PhotoImage(file ='../Images/chi fou mi/versus.gif')
        pierre = PhotoImage(file ='../Images/chi fou mi/pierre.gif')
        papier = PhotoImage(file ='../Images/chi fou mi/papier.gif')
        ciseaux = PhotoImage(file ='../Images/chi fou mi/ciseaux.gif')
        bravo=PhotoImage(file ='../Images/bravo.gif')
        perdu=PhotoImage(file ='../Images/perdu2.gif')

        # Label
        texte=Label(fen_enigme2, text="Papier, cailloux, ciseaux :", font=("Helvetica", 40))
        texte.place(x=500,y=50)

        texte1 = Label(fen_enigme2, text="Moi :", font=("Helvetica", 20))
        texte1.place(x=525,y=150)

        texte2 = Label(fen_enigme2, text="Ordi :", font=("Helvetica", 20))
        texte2.place(x=925,y=150)

        texte3 = Label(fen_enigme2, text="Pour jouer, cliquez sur une des icones ci-dessous.",font=("Helvetica", 18))
        texte3.place(x=500,y=450)

        texte4=Label(fen_enigme2, text="Les règles du jeu:\n -Le premier qui a 5 points gagne\n -La pierre gagne le ciseaux et perd contre la feuille \n -La feuille gagne la pierre et perd contre le ciseaux \n -Le ciseaux gagne contre la feuille et perd contre la pierre .",font=("Helvetica", 12))
        texte4.place(x=1100, y=100)

        score1 = Label(fen_enigme2, text="0", font=("Helvetica", 20))
        score1.place(x=550,y=200)

        score2 = Label(fen_enigme2, text="0", font=("Helvetica", 20))
        score2.place(x=950,y=200)

        lab1 = Label(fen_enigme2, image=rien)
        lab1.place(x=500,y=300)

        lab2 = Label(fen_enigme2, image=versus)
        lab2.place(x=700,y=300)

        lab3 = Label(fen_enigme2, image=rien)
        lab3.place(x=900,y=300)

        # boutons
        bouton1 = Button(fen_enigme2,command=jouer_pierre)
        bouton1.configure(image=pierre)
        bouton1.place(x=500,y=500)

        bouton2 = Button(fen_enigme2,command=jouer_papier)
        bouton2.configure(image=papier)
        bouton2.place(x=700,y=500)

        bouton3 = Button(fen_enigme2,command=jouer_ciseaux)
        bouton3.configure(image=ciseaux)
        bouton3.place(x=900,y=500)

        bouton4 = Button(fen_enigme2,text='Recommencer',command=reinit)
        bouton4.place(x=400,y=700)

        bouton5 = Button(fen_enigme2,text='Quitter',command=fen_enigme2.destroy)
        bouton5.place(x=1000,y=700)

        # demarrage :
        fen_enigme2.mainloop()

    liste_jeux = [ jeu_1 , jeu_2 ]
    liste_jeux[zone_cliquée]()

##############################################################
###############  PROGRAMME PRINCIPAL   #######################
##############################################################

fen_accueil=Tk()
démarrage()
fen_accueil.mainloop()
